import{d as b,a as k,u as v,b as D,e as p,g as B,j as t,o as F,h as S,w as i,i as d,am as T,an as $,s as x,ao as N,ap as P,G as f,ab as y}from"./index.f501c99b.js";import{u as V}from"./useRouteParam.2c81f519.js";import{u as j}from"./usePageTitle.5cb2ef88.js";const M=b({__name:"FlowRunCreate",setup(A){const c=k(),a=V("id"),s=v(),_=D(c.deployments.getDeployment,[a]),e=p(()=>_.response),w=async n=>{var r,o,l;try{const u=await c.deployments.createDeploymentFlowRun(a.value,n),m=(l=(o=(r=n.state)==null?void 0:r.stateDetails)==null?void 0:o.scheduledTime)!=null?l:void 0,g=!m,C=N(P,{flowRun:u,flowRunRoute:f.flowRun,router:s,immediate:g,startTime:m});y(C,"success"),s.push(f.deployment(a.value))}catch(u){y("Something went wrong trying to create a flow run","error"),console.error(u)}},h=()=>{s.back()},R=p(()=>e.value?`Create Flow Run for Deployment: ${e.value.name}`:"Create Flow Run for Deployment");return j(R),(n,r)=>{const o=B("p-layout-default");return t(e)?(F(),S(o,{key:0},{header:i(()=>[d(t(T),{deployment:t(e)},null,8,["deployment"])]),default:i(()=>[d(t($),{deployment:t(e),onSubmit:w,onCancel:h},null,8,["deployment"])]),_:1})):x("",!0)}}});export{M as default};
