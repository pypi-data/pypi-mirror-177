import{d as B,a as D,u as w,av as C,r as k,g,j as e,o as x,h as P,w as c,i as s,aS as T,aT as $,q as E,aO as S,aM as A,s as I,ab as i,G as N}from"./index.f501c99b.js";import{u as R}from"./useRouteParam.2c81f519.js";import{u as V}from"./usePageTitle.5cb2ef88.js";const H=B({__name:"BlockEdit",async setup(j){let o,n;const u=D(),l=w(),r=R("blockDocumentId"),a=([o,n]=C(()=>u.blockDocuments.getBlockDocument(r.value)),o=await o,n(),o),{blockType:_,blockSchema:b}=a,m=k(a.data),d=k(a.name);function f(p){u.blockDocuments.updateBlockDocument(a.id,p).then(()=>{i("Block updated successfully","success"),l.push(N.block(r.value))}).catch(t=>{i("Failed to update block","error"),console.error(t)})}function h(){l.back()}return V(`Edit Block: ${d.value}`),(p,t)=>{const y=g("p-layout-default");return e(a)?(x(),P(y,{key:0,class:"block-edit"},{header:c(()=>[s(e(T),{"block-document":e(a)},null,8,["block-document"])]),default:c(()=>[s(e(A),{"block-type":e(_)},{default:c(()=>[s(e($),E({data:m.value,"onUpdate:data":t[0]||(t[0]=v=>m.value=v)},{name:d.value,blockSchema:e(b)},S({submit:f,cancel:h})),null,16,["data"])]),_:1},8,["block-type"])]),_:1})):I("",!0)}}});export{H as default};
