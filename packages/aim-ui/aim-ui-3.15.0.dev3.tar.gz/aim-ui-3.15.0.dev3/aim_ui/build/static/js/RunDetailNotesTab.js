(this.webpackJsonpui_v2=this.webpackJsonpui_v2||[]).push([[12],{1449:function(e,t,n){},1476:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n(6),o=n(0),c=n.n(o),l=n(16),s=n.n(l),r=n(1153),d=n.n(r),u=n(67),j=n.n(u),b=n(257),f=n(340),m=n(5),v=n(676),_=n(351),h=n(86),O=n(670),x=n(1);var p=function(e){var t=e.when,n=e.message,a=void 0===n?"Changes you made may not be saved.":n,o=e.confirmBtnText,l=void 0===o?"Leave":o,s=c.a.useState(!1),r=Object(i.a)(s,2),d=r[0],u=r[1],j=c.a.useState(""),b=Object(i.a)(j,2),f=b[0],v=b[1],_=c.a.useState(!1),p=Object(i.a)(_,2),N=p[0],C=p[1],g=Object(h.h)();function y(e){return t?(null===e||void 0===e||e.preventDefault(),e&&(e.returnValue="Your changes is not saved. Do you still want to leave"),""):void 0}function D(){u(!1)}return c.a.useEffect((function(){return N&&(g.push(f),C(!1)),window.addEventListener("beforeunload",y),function(){window.removeEventListener("beforeunload",y)}}),[N,t]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(h.a,{when:t,message:function(e){return!!N||(function(e){u(!0),v(e)}(e.pathname),!1)}}),Object(x.jsx)(O.a,{open:d,onCancel:D,onSubmit:function(){D(),f&&C(!0)},text:a,icon:Object(x.jsx)(m.f,{name:"warning-contained"}),statusType:"warning",confirmBtnText:l,title:"Are you sure"})]})},N=n(17),C=n(26),g=n(15),y=n(947);var D=function(e){var t=e.children,n=c.a.useRef(null),a=c.a.useState(!1),o=Object(i.a)(a,2),l=o[0],s=o[1];return c.a.useEffect((function(){if(l){var e=n.current.parentNode.parentNode.parentNode;"notes-toolbar-popover"!==e.id&&(e.id="notes-toolbar-popover")}else s(!0)}),[l]),Object(x.jsx)("div",{ref:n,children:t})};n(1449);function T(e){var t,n=e.runHash,o=Object(b.b)(y.a),l=o.isLoading,r=o.noteData,u=o.notifyData,h=c.a.useState(""),O=Object(i.a)(h,2),T=O[0],w=O[1],M=c.a.useState(!0),E=Object(i.a)(M,2),S=E[0],R=E[1],k=c.a.useState(null),B=Object(i.a)(k,2),Y=B[0],P=B[1],L=c.a.useRef(null);c.a.useEffect((function(){return y.a.initialize(n),g.a(N.a.runDetails.tabs.notes.tabView),function(){y.a.destroy()}}),[]),c.a.useEffect((function(){var e;L.current&&(w((null===r||void 0===r?void 0:r.id)?null===r||void 0===r?void 0:r.content:""),P(Object(a.a)(Object(a.a)({},null===(e=L.current)||void 0===e?void 0:e.theme()),C.c)))}),[r]);var z=c.a.useCallback((function(){R(!0),(null===r||void 0===r?void 0:r.id)?H():y.a.onNoteCreate(n,{content:L.current.value()})}),[null===r||void 0===r?void 0:r.id,n]),H=c.a.useCallback((function(){y.a.onNoteUpdate(n,{content:L.current.value()})}),[n]),A=c.a.useCallback((function(e){var t=T===e();S!==t&&R(t)}),[S,T]);return Object(x.jsxs)("section",{className:"RunDetailNotesTab",children:[Object(x.jsx)(p,{when:!S}),Object(x.jsxs)("div",{className:s()("RunDetailNotesTab__Editor",{isLoading:l}),children:[Object(x.jsxs)("div",{className:"RunDetailNotesTab__Editor__actionPanel",children:[Object(x.jsxs)("div",{className:"RunDetailNotesTab__Editor__actionPanel__info",children:[(null===r||void 0===r?void 0:r.created_at)&&Object(x.jsx)(f.a,{title:"Created at",children:Object(x.jsxs)("div",{className:"RunDetailNotesTab__Editor__actionPanel__info-field",children:[Object(x.jsx)(m.f,{name:"calendar"}),Object(x.jsx)(m.n,{tint:70,children:"".concat(j.a.utc(null===r||void 0===r?void 0:r.created_at).local().format("YYYY-MM-DD HH:mm A"))})]})}),(null===r||void 0===r?void 0:r.updated_at)&&Object(x.jsx)(f.a,{title:"Updated at",children:Object(x.jsxs)("div",{className:"RunDetailNotesTab__Editor__actionPanel__info-field",children:[Object(x.jsx)(m.f,{name:"time"}),Object(x.jsx)(m.n,{tint:70,children:"".concat(j.a.utc(null===r||void 0===r?void 0:r.updated_at).local().format("YYYY-MM-DD HH:mm A"))})]})})]}),Object(x.jsx)(f.a,{title:"Save Note",children:Object(x.jsx)("div",{children:Object(x.jsx)(m.c,{disabled:S||l,variant:"contained",size:"small",onClick:z,children:"Save"})})})]}),Object(x.jsx)(d.a,{ref:L,className:"RunDetailNotesTab__Editor__container",value:T,placeholder:"Leave your Note",theme:Y||(null===(t=L.current)||void 0===t?void 0:t.theme()),disableExtensions:["table","image","container_notice"],tooltip:function(e){var t=e.children;return Object(x.jsx)(D,{children:t})},onChange:A}),l&&Object(x.jsx)(_.a,{})]}),u.length>0&&Object(x.jsx)(v.a,{handleClose:y.a.onNoteNotificationDelete,data:u})]})}T.displayName="RunDetailNotesTab";var w=c.a.memo(T);t.default=w},670:function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(645),c=n(5),l=n(10),s=(n(671),n(1));function r(e){return Object(s.jsx)(l.a,{children:Object(s.jsxs)(o.a,{open:e.open,onClose:e.onCancel,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",PaperProps:{elevation:10},className:"ConfirmModal ConfirmModal__".concat(e.statusType),children:[Object(s.jsxs)("div",{className:"ConfirmModal__Body",children:[Object(s.jsx)(c.c,{size:"small",className:"ConfirmModal__Close__Icon",color:"secondary",withOnlyIcon:!0,onClick:e.onCancel,children:Object(s.jsx)(c.f,{name:"close"})}),Object(s.jsxs)("div",{className:"ConfirmModal__Title__Container",children:[Object(s.jsx)("div",{className:"ConfirmModal__Icon",children:e.icon}),e.title&&Object(s.jsx)(c.n,{size:16,tint:100,component:"h4",weight:600,children:e.title})]}),Object(s.jsxs)("div",{children:[e.description&&Object(s.jsx)(c.n,{className:"ConfirmModal__description",weight:400,component:"p",id:"dialog-description",children:e.description}),Object(s.jsxs)("div",{children:[e.text&&Object(s.jsx)(c.n,{className:"ConfirmModal__text",weight:400,component:"p",size:14,id:"dialog-description",children:e.text||""}),e.children&&e.children]})]})]}),Object(s.jsxs)("div",{className:"ConfirmModal__Footer",children:[Object(s.jsx)(c.c,{onClick:e.onCancel,className:"ConfirmModal__CancelButton",children:e.cancelBtnText}),Object(s.jsx)(c.c,{onClick:e.onSubmit,color:"primary",variant:"contained",className:"ConfirmModal__ConfirmButton",autoFocus:!0,children:e.confirmBtnText})]})]})})}r.defaultProps={confirmBtnText:"Confirm",cancelBtnText:"Cancel",statusType:"info"},r.displayName="ConfirmModal",t.a=i.a.memo(r)},671:function(e,t,n){}}]);
//# sourceMappingURL=RunDetailNotesTab.js.map?version=5e55761cee9325355926