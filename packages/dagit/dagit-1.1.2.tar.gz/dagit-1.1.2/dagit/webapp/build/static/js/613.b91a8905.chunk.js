"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[613],{2613:function(n,e,r){r.r(e),r.d(e,{CodeLocationsPage:function(){return I},default:function(){return T}});var t=r(31112),i=r(12745),o=r(32030),a=r(325),l=r(78093),s=r(78072),c=r(19065),d=r(54268),x=r(60652),h=r(11831),u=r(7838),p=r(34595),j=r(89646),m=r(55113),g=r(6466),y=r(63579),f=r(55419),v=r(86562),w=r(17235),k=r(73362),b=r(24971),C=r(32289),L=function(n){var e=n.repositoryUrl,r=function(n){try{var e,r,t,i=new URL(n);if("github.com"===i.host){var o=i.pathname.split("/",7),a=(0,c.Z)(o,5);e=a[1],r=a[2],t=a[4]}else if("gitlab.com"===i.host){var l=i.pathname.split("/",8),s=(0,c.Z)(l,6);e=s[1],r=s[2],t=s[5]}if(e&&r&&t)return"".concat(e,"/").concat(r,"@").concat(t)}catch(d){return n}return n}(e);return(0,C.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:[(0,C.jsx)(b.JO,{color:u.w.Link,name:"link",style:{display:"inline-block",verticalAlign:"middle"}})," ",r]})},_=r(76336),E={showSeconds:!0,showTimezone:!0},R=function(n){var e,r=n.location,t=n.locationOrError,i=a.useState(!1),l=(0,c.Z)(i,2),s=l[0],h=l[1],u=a.useMemo((function(){return(0,w.je)(r)}),[r]),p=(0,w.Dc)({scope:"location",reloadFn:u}),j=p.reloading,m=p.tryReload;return"LOADING"===t.loadStatus?t.locationOrLoadError?(0,C.jsx)(d.V,{minimal:!0,intent:"primary",children:"Updating..."}):(0,C.jsx)(d.V,{minimal:!0,intent:"primary",children:"Loading..."}):"PythonError"===(null===(e=t.locationOrLoadError)||void 0===e?void 0:e.__typename)?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(o.x,{flex:{alignItems:"center",gap:12},children:[(0,C.jsx)(d.V,{minimal:!0,intent:"danger",children:"Failed"}),(0,C.jsx)(x.Z,{onClick:function(){return h(!0)},children:(0,C.jsx)("span",{style:{fontSize:"14px"},children:"View error"})})]}),(0,C.jsx)(k.p,{location:r,isOpen:s,error:t.locationOrLoadError,reloading:j,onDismiss:function(){return h(!1)},onTryReload:function(){return m()}})]}):(0,C.jsx)(d.V,{minimal:!0,intent:"success",children:"Loaded"})},O=function(n){var e=n.location,r=(0,y.TE)().canReloadRepositoryLocation;return r.enabled?(0,C.jsx)(v.s,{location:e,children:function(n){var e=n.reloading,r=n.tryReload;return(0,C.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,C.jsx)(x.Z,{onClick:function(){return r()},children:"Reload"}),e?(0,C.jsx)(p.$,{purpose:"body-text"}):null]})}}):(0,C.jsx)(h.u,{content:r.disabledReason,children:(0,C.jsx)(x.Z,{color:u.w.Gray400,children:"Reload"})})},S=function(){var n=a.useContext(_.C5),e=n.locationEntries;return n.loading&&!e.length?(0,C.jsxs)(o.x,{flex:{gap:8,alignItems:"center"},padding:{horizontal:24},children:[(0,C.jsx)(p.$,{purpose:"body-text"}),(0,C.jsx)("div",{children:"Loading..."})]}):e.length?(0,C.jsxs)(m.i,{children:[(0,C.jsx)("thead",{children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{children:"Repository location"}),(0,C.jsx)("th",{children:"Status"}),(0,C.jsx)("th",{colSpan:2,children:"Updated"})]})}),(0,C.jsx)("tbody",{children:e.map((function(n){return(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{style:{maxWidth:"50%"},children:(0,C.jsxs)(g.Z,{direction:"column",spacing:4,children:[(0,C.jsx)("strong",{children:n.name}),(0,C.jsx)("div",{children:n.displayMetadata.map((function(n,e){var r="url"===n.key?"source":n.key,t="url"===n.key?(0,C.jsx)(L,{repositoryUrl:n.value}):n.value;return(0,C.jsx)("div",{children:(0,C.jsxs)(i.YS,{style:{wordBreak:"break-word"},children:["".concat(r,": "),(0,C.jsx)("span",{style:{color:u.w.Gray400},children:t})]})},e)}))})]})}),(0,C.jsx)("td",{children:(0,C.jsx)(R,{location:n.name,locationOrError:n})}),(0,C.jsx)("td",{style:{whiteSpace:"nowrap"},children:(0,C.jsx)(f.E,{timestamp:{unix:n.updatedTimestamp},timeFormat:E})}),(0,C.jsx)("td",{style:{width:"180px"},children:(0,C.jsx)(O,{location:n.name})})]},n.name)}))})]}):(0,C.jsx)(o.x,{padding:{vertical:32},children:(0,C.jsx)(j.t,{icon:"folder",title:"No repository locations",description:"When you add a repository location to this workspace, it will appear here."})})},Z=r(25171),F=r(8851),I=function(){(0,l.Px)();var n=a.useContext(Z.N).pageTitle,e=a.useContext(_.C5),r=e.locationEntries,c=e.loading,d=r.length;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(t.m,{title:(0,C.jsx)(i.X6,{children:n}),tabs:(0,C.jsx)(F.Z,{tab:"code-locations"})}),(0,C.jsxs)(o.x,{padding:{vertical:16,horizontal:24},flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},style:{height:"64px"},children:[(0,C.jsx)(i.pm,{id:"repository-locations",children:c||!d?"Code locations":1===d?"1 code location":"".concat(d," code locations")}),d>1?(0,C.jsx)(s.i,{}):null]}),(0,C.jsx)(S,{})]})},T=I}}]);
//# sourceMappingURL=613.b91a8905.chunk.js.map