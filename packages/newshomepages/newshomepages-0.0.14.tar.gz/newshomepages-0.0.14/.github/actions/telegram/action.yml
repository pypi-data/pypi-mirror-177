name: Telegram
description: Post screenshots to Telegram of the provided site

inputs:
  command:
    description: The telegrammer.py command to run
    required: true
  api-key:
    description: An API key with permission to post to Telegram
    required: true

runs:
  using: "composite"
  steps:
    - id: install
      name: Install Python dependencies
      uses: ./.github/actions/install

    - uses: actions/download-artifact@v3
      with:
        name: mosaics
        path: ./_input

    - id: telegram
      name: Telegram
      run: pipenv run python -m newshomepages.telegrammer ${{ inputs.command }} -i ./_input
      shell: bash
      env:
        TELEGRAM_API_KEY: ${{ inputs.api-key }}
