name: Archive all sites (Batch 10)

on:
  workflow_dispatch:
  schedule:
    - cron: "0 5,17 * * *"

jobs:
  archive-batch:
    name: Archive batch
    uses: palewire/news-homepages/.github/workflows/reusable-archive-batch-workflow.yml@main
    with:
      batch: 10
    secrets: inherit

  # mosaic:
  #   name: Create Mosaic GIF
  #   runs-on: ubuntu-latest
  #   timeout-minutes: 15
  #   needs: [archive-batch]
  #   steps:
  #     - id: checkout
  #       name: Checkout
  #       uses: actions/checkout@v3

  #     - id: install
  #       name: Install Python dependencies
  #       uses: ./.github/actions/install

  #     - id: mosaic
  #       name: Mosaic
  #       run: pipenv run python -m newshomepages.mosaic gif -i ./latest-screenshots -o ./_dist
  #       shell: bash

  #     - id: save
  #       name: Save artifact
  #       uses: actions/upload-artifact@v3
  #       with:
  #         name: mosaics
  #         path: _dist
  #         if-no-files-found: error

  # tweet:
  #   name: Post to Twitter
  #   runs-on: ubuntu-latest
  #   timeout-minutes: 15
  #   needs: [mosaic]
  #   steps:
  #     - id: checkout
  #       name: Checkout
  #       uses: actions/checkout@v3

  #     - id: install
  #       name: Install Python dependencies
  #       uses: ./.github/actions/install

  #     - uses: actions/download-artifact@v3
  #       with:
  #         name: mosaics
  #         path: ./_input

  #     - id: tweet
  #       name: Tweet
  #       run: pipenv run python -m newshomepages.tweet mosaic -i ./_input/mosaic.gif
  #       shell: bash
  #       env:
  #         TWITTER_CONSUMER_KEY: ${{ secrets.TWITTER_CONSUMER_KEY }}
  #         TWITTER_CONSUMER_SECRET: ${{ secrets.TWITTER_CONSUMER_SECRET }}
  #         TWITTER_ACCESS_TOKEN_KEY: ${{ secrets.TWITTER_ACCESS_TOKEN_KEY }}
  #         TWITTER_ACCESS_TOKEN_SECRET: ${{ secrets.TWITTER_ACCESS_TOKEN_SECRET }}

  # telegram:
  #   name: Post to Telegram
  #   runs-on: ubuntu-latest
  #   timeout-minutes: 15
  #   needs: [mosaic]
  #   steps:
  #     - id: checkout
  #       name: Checkout
  #       uses: actions/checkout@v3

  #     - id: telegram
  #       name: Telegram
  #       uses: ./.github/actions/telegram
  #       with:
  #         api-key: ${{ secrets.TELEGRAM_API_KEY }}
  #         command: mosaic
